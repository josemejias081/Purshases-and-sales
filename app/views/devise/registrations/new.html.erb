<section class=" row justify-content-center">
  <div class="col-md-8 p-4 p-md-5 mt-5 border rounded-3 bg-light">
  <h2>Registrarse</h2>
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
        <%= render "devise/shared/error_messages", resource: resource %>

      <div class="form-group mb-4">
        <%= f.text_field :name, autofocus: true, placeholder: "Nombre y Apellido",class: 'form-control' %>
      </div>

      <div class="form-group mb-4">
        <%= f.email_field :email, autofocus: true, placeholder: "Correo Electrónico", autocomplete: "email",class: 'form-control' %>
      </div>

      <div class="form-group mb-4">
        <%= f.email_field :address, autofocus: true, placeholder: "Dirección", class: 'form-control' %>
      </div>

      <div class="form-group mb-4">
        <%= f.email_field :phone, autofocus: true, placeholder: "Teléfono", class: 'form-control' %>
      </div>

      <div class="form-group mb-4 ">
        <%= f.select( :role, User.roles.keys, {class: "form-control "}) %>
      </div>

      <% if current_user.is_superadmin?%>
        <div class="form-group col-md-4">
          <label>Empresa</label><br>
          <%= f.collection_select(:company_id, @business, :id, :business) %>         
        </div>
      <% else %>
        <%= f.hidden_field :company_id, value: current_user.company.id%>
      <% end %>

      


      <div class="col-md-6 form-group">
        <label>Negocios</label><br>
        <div class="text-dark">
          <%= collection_select(:product, :business_id, @businesses, :id, :name, {:prompt => 'Seleccione un negocio'}, { class: "form-control" })%>
        </div>
      </div>

      <div class="form-group mb-4">
        <%= f.password_field :password, autocomplete: "new-password", placeholder: "Contraseña (6 Caracteres mínimos)", class: 'form-control' %>
      </div>

      <div class="form-group mb-4">
        <%= f.password_field :password_confirmation, autocomplete: "new-password", placeholder: "Confirmar Contraseña",class: 'form-control' %>
      </div>

      <div class="actions d-grid">
        <%= f.submit "Registrar", class: " w-100 btn btn-lg btn-primary" %>
      </div>
    <% end %>
    <small class="text-muted"><%= render "devise/shared/links" %></small>
  </div>
</section>
